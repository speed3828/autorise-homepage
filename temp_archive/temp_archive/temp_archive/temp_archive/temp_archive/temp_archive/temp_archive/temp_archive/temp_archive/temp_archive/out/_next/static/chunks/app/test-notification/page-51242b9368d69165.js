(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[123],{4475:function(e,s,r){Promise.resolve().then(r.bind(r,3155))},3155:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return I}});var a=r(3827),n=r(4090),t=r(3107),l=r(5986),o=r(2215);let c=o.env.NEXT_PUBLIC_EMAILJS_PUBLIC_KEY||"YOUR_EMAILJS_PUBLIC_KEY",i=o.env.NEXT_PUBLIC_EMAILJS_SERVICE_ID||"service_autorise",m=o.env.NEXT_PUBLIC_EMAILJS_TEMPLATE_ID||"template_inquiry",d=o.env.NEXT_PUBLIC_SMS_API_KEY||"YOUR_SMS_API_KEY",u=o.env.NEXT_PUBLIC_SMS_API_SECRET||"YOUR_SMS_API_SECRET",_=o.env.NEXT_PUBLIC_SMS_SENDING_NUMBER||"발신번호",h=o.env.NEXT_PUBLIC_SMS_API_URL||"https://api-sms.cloud.toast.com/sms/v3.0/appKeys/{appKey}/sender/sms",E=o.env.NEXT_PUBLIC_RECIPIENT_EMAIL||"speed382286@gmail.com",S=o.env.NEXT_PUBLIC_RECIPIENT_PHONE||"010-4316-3828",p=async e=>{let s=!1,r=!1;try{return await N(e),s=!0,await b(e),r=!0,{success:!0,emailSent:s,smsSent:r}}catch(e){return console.error("알림 전송 실패:",e),{success:!1,emailSent:s,smsSent:r,error:e instanceof Error?e.message:"알 수 없는 오류"}}},N=async e=>{if(!e.name||!e.email||!e.message)throw Error("이메일 전송에 필요한 데이터가 누락되었습니다.");let s={from_name:e.name,from_email:e.email,message:e.message,to_email:E};try{if("YOUR_EMAILJS_PUBLIC_KEY"===c)return console.log("개발 환경: 이메일 전송 시뮬레이션",s),Promise.resolve();return await l.ZP.send(i,m,s,c),Promise.resolve()}catch(e){throw console.error("이메일 전송 실패:",e),Error("이메일 전송에 실패했습니다.")}},b=async e=>{if(!e.name||!e.email)throw Error("SMS 전송에 필요한 데이터가 누락되었습니다.");try{if("YOUR_SMS_API_KEY"===d)return console.log("개발 환경: SMS 전송 시뮬레이션",{recipient:S,message:"[Autorise] ".concat(e.name,"님의 문의: ").concat(e.email)}),Promise.resolve();let s=h.replace("{appKey}",d),r="[Autorise] ".concat(e.name,"님의 문의: ").concat(e.email," - ").concat(e.message.substring(0,50)).concat(e.message.length>50?"...":""),a=await t.Z.post(s,{body:r,sendNo:_,recipientList:[{recipientNo:S.replace(/-/g,"")}]},{headers:{"Content-Type":"application/json;charset=UTF-8","X-Secret-Key":u}});if(200!==a.status)throw Error("SMS 전송 실패: ".concat(a.status));return Promise.resolve()}catch(e){throw console.error("SMS 전송 실패:",e),Error("SMS 전송에 실패했습니다.")}};function I(){let[e,s]=(0,n.useState)({name:"",email:"",message:""}),[r,t]=(0,n.useState)(null),[l,o]=(0,n.useState)(!1),c=e=>{let{name:r,value:a}=e.target;s(e=>({...e,[r]:a}))},i=async s=>{s.preventDefault(),o(!0);try{let s=await p(e);t(s)}catch(e){console.error("Notification error:",e),t({success:!1,emailSent:!1,smsSent:!1,error:e instanceof Error?e.message:"알 수 없는 오류"})}finally{o(!1)}};return(0,a.jsxs)("div",{className:"p-6 max-w-2xl mx-auto",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"알림 서비스 테스트"}),(0,a.jsxs)("form",{onSubmit:i,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block mb-1",children:"이름"}),(0,a.jsx)("input",{type:"text",id:"name",name:"name",value:e.name,onChange:c,className:"w-full p-2 border rounded",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block mb-1",children:"이메일"}),(0,a.jsx)("input",{type:"email",id:"email",name:"email",value:e.email,onChange:c,className:"w-full p-2 border rounded",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"message",className:"block mb-1",children:"메시지"}),(0,a.jsx)("textarea",{id:"message",name:"message",value:e.message,onChange:c,className:"w-full p-2 border rounded h-32",required:!0})]}),(0,a.jsx)("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:bg-blue-300",children:l?"전송 중...":"알림 테스트"})]}),r&&(0,a.jsxs)("div",{className:"mt-6 p-4 rounded ".concat(r.success?"bg-green-100":"bg-red-100"),children:[(0,a.jsx)("h2",{className:"font-bold",children:r.success?"알림 전송 성공":"알림 전송 실패"}),(0,a.jsxs)("ul",{className:"mt-2",children:[(0,a.jsxs)("li",{children:["이메일: ",r.emailSent?"성공":"실패"]}),(0,a.jsxs)("li",{children:["SMS: ",r.smsSent?"성공":"실패"]}),r.error&&(0,a.jsxs)("li",{className:"text-red-600",children:["오류: ",r.error]})]})]}),(0,a.jsxs)("div",{className:"mt-6 p-4 bg-gray-100 rounded",children:[(0,a.jsx)("h2",{className:"font-bold mb-2",children:"개발 환경 안내"}),(0,a.jsx)("p",{children:"실제 API 키가 설정되지 않은 경우, 테스트는 콘솔에 로그만 출력합니다. 실제 메시지를 보내려면 .env.local 파일에 환경 변수를 설정하세요."})]})]})}}},function(e){e.O(0,[804,971,69,744],function(){return e(e.s=4475)}),_N_E=e.O()}]);